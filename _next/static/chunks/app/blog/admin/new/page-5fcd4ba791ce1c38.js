(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{2289:function(e,t,r){Promise.resolve().then(r.bind(r,1038))},1038:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var a=r(7437),o=r(2265),n=r(9376);function l(e){let{post:t,isEditing:r=!1}=e,l=(0,n.useRouter)(),[s,c]=(0,o.useState)({title:(null==t?void 0:t.title)||"",excerpt:(null==t?void 0:t.excerpt)||"",content:(null==t?void 0:t.content)||"",author:(null==t?void 0:t.author)||""}),[d,i]=(0,o.useState)(!1),[u,m]=(0,o.useState)(null),p=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},b=async e=>{e.preventDefault(),i(!0),m(null);try{let e=r?"/api/blog/".concat(null==t?void 0:t.slug):"/api/blog",a=localStorage.getItem("blog_admin_username"),o=localStorage.getItem("blog_admin_password");if(!a||!o){m("Authentication required. Please log in again."),i(!1);return}let n=await fetch(e,{method:r?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(btoa("".concat(a,":").concat(o)))},body:JSON.stringify({...s,date:(null==t?void 0:t.date)||new Date().toISOString()})});if(!n.ok)throw Error("Failed to ".concat(r?"update":"create"," post"));await n.json(),l.push("/blog/admin"),l.refresh()}catch(e){m("Error ".concat(r?"updating":"creating"," post. Please try again.")),console.error(e)}finally{i(!1)}};return(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[u&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md text-red-600",children:u}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"title",className:"block font-medium",children:["Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:s.title,onChange:p,required:!0,className:"w-full p-3 border border-[var(--border-color)] rounded-md bg-[var(--background)] text-[var(--text-color)]",placeholder:"Enter post title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"author",className:"block font-medium",children:["Author ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"author",name:"author",value:s.author,onChange:p,required:!0,className:"w-full p-3 border border-[var(--border-color)] rounded-md bg-[var(--background)] text-[var(--text-color)]",placeholder:"Enter author name"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"excerpt",className:"block font-medium",children:["Excerpt ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"excerpt",name:"excerpt",value:s.excerpt,onChange:p,required:!0,className:"w-full p-3 border border-[var(--border-color)] rounded-md bg-[var(--background)] text-[var(--text-color)]",placeholder:"Brief summary of the post"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"content",className:"block font-medium",children:["Content ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("textarea",{id:"content",name:"content",value:s.content,onChange:p,required:!0,rows:12,className:"w-full p-3 border border-[var(--border-color)] rounded-md bg-[var(--background)] text-[var(--text-color)]",placeholder:"Write your blog post content here..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>l.back(),className:"px-6 py-3 border border-[var(--border-color)] rounded-md hover:bg-[var(--light-bg)] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-[var(--primary)] text-white rounded-md hover:bg-[var(--secondary)] transition-colors disabled:opacity-70",children:d?"Saving...":r?"Update Post":"Create Post"})]})]})}function s(){return(0,a.jsxs)("div",{className:"container py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"Create New Blog Post"}),(0,a.jsx)(l,{})]})}},9376:function(e,t,r){"use strict";var a=r(5475);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2289)}),_N_E=e.O()}]);