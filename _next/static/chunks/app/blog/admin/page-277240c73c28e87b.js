(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{8284:function(e,r,t){Promise.resolve().then(t.bind(t,4302))},4302:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return n}});var s=t(7437),a=t(2265),o=t(7648),l=t(9376);function n(){(0,l.useRouter)();let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(!0),[d,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[p,g]=(0,a.useState)(null),f=async e=>{if(e.preventDefault(),g(null),!h.trim()||!x.trim()){g("Please enter both username and password");return}try{let e=await fetch("/api/blog",{method:"GET",headers:{Authorization:"Basic ".concat(btoa("".concat(h,":").concat(x))),"Content-Type":"application/json"},credentials:"same-origin"});if(!e.ok){let r=await e.json();throw Error(r.error||"Authentication failed")}u(!0),m(""),b(""),setTimeout(()=>{b("")},0)}catch(e){console.error("Login error:",e),g("Invalid username or password"),b("")}};(0,a.useEffect)(()=>{!async function(){try{let e=await fetch("/api/blog");if(!e.ok)throw Error("Failed to fetch posts");let t=await e.json();r(t)}catch(e){console.error("Error fetching posts:",e),i("Failed to load blog posts. Please try again.")}finally{n(!1)}}()},[]);let y=async t=>{if(confirm("Are you sure you want to delete this post?"))try{if(!(await fetch("/api/blog/".concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete post");r(e.filter(e=>e.slug!==t))}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post. Please try again.")}};return c?(0,s.jsxs)("div",{className:"container py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Blog Posts"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(o.default,{href:"/blog",className:"px-4 py-2 border border-[var(--border-color)] rounded-md hover:bg-[var(--light-bg)] transition-colors",children:"Back to Blog"}),(0,s.jsx)(o.default,{href:"/blog/admin/new",className:"px-4 py-2 bg-[var(--primary)] text-white rounded-md hover:bg-[var(--secondary)] transition-colors",children:"Create New Post"})]})]}),d&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md text-red-600 mb-6",children:d}),t?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{children:"Loading posts..."})}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 border border-dashed border-[var(--border-color)] rounded-lg",children:[(0,s.jsx)("h3",{className:"text-xl font-medium mb-2",children:"No posts yet"}),(0,s.jsx)("p",{className:"text-[var(--muted)] mb-4",children:"Create your first blog post to get started!"}),(0,s.jsx)(o.default,{href:"/blog/admin/new",className:"px-4 py-2 bg-[var(--primary)] text-white rounded-md hover:bg-[var(--secondary)] transition-colors",children:"Create New Post"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-[var(--light-bg)] border-b border-[var(--border-color)]",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Title"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Author"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b border-[var(--border-color)] hover:bg-[var(--light-bg)]",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)(o.default,{href:"/blog/".concat(e.slug),className:"text-[var(--primary)] hover:underline",children:e.title})}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.author}),(0,s.jsx)("td",{className:"px-4 py-3",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(o.default,{href:"/blog/admin/edit/".concat(e.slug),className:"px-3 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>y(e.slug),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors",children:"Delete"})]})})]},e.slug))})]})})]}):(0,s.jsx)("div",{className:"container py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Login"}),p&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md text-red-600 mb-6",children:p}),(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,s.jsx)("input",{id:"username",type:"text",value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",value:x,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-[var(--primary)] text-white rounded-md hover:bg-[var(--secondary)] transition-colors",children:"Login"})]})]})})}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return a.a}});var s=t(2972),a=t.n(s)},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8284)}),_N_E=e.O()}]);